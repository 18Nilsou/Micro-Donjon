openapi: 3.0.0
info:
  title: Item Service API
  description: API de gestion des items
  version: 1.1.0
servers:
  - url: http://localhost:3004
paths:
  /items:
    get:
      summary: Récupérer tous les items
      tags:
        - Items
      responses:
        '200':
          description: Liste des items
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Item'
        '500':
          description: Erreur interne du serveur
    post:
      summary: Créer un nouvel item
      tags:
        - Items
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ItemCreate'
      responses:
        '201':
          description: Item créé avec succès
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
        '400':
          description: Données invalides
        '500':
          description: Erreur interne du serveur

  /items/random:
    get:
      summary: Récupérer un item aléatoire
      tags:
        - Items
      responses:
        '200':
          description: Item aléatoire
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
        '404':
          description: Aucun item trouvé
        '500':
          description: Erreur interne du serveur

  /items/{uuid}:
    get:
      summary: Récupérer un item par son UUID
      tags:
        - Items
      parameters:
        - name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Détails de l'item
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
        '404':
          description: Item non trouvé
        '500':
          description: Erreur interne du serveur
    put:
      summary: Mettre à jour un item
      tags:
        - Items
      parameters:
        - name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Item'
      responses:
        '200':
          description: Item mis à jour
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
        '400':
          description: Données invalides
        '404':
          description: Item non trouvé
        '500':
          description: Erreur interne du serveur
    delete:
      summary: Supprimer un item
      tags:
        - Items
      parameters:
        - name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Item supprimé avec succès
        '404':
          description: Item non trouvé
        '500':
          description: Erreur interne du serveur

components:
  schemas:

    Item:
      type: object
      required: [uuid, name, effect, value, rarity, itemType]
      properties:
        uuid:
          type: string
          format: uuid
          description: Identifiant unique de l'item (UUID).
          example: "b7e23ec2-8b7a-4c2a-9c1a-1e2b3c4d5e6f"
        name:
          type: string
          description: Nom de l'item.
          example: "Iron Sword"
        effect:
          type: string
          description: Effet principal de l'item (attaque, soin, etc.).
          enum: [Attack, Heal, HealthPointMax]
          example: "Attack"
        value:
          type: number
          description: Valeur numérique de l'effet (dégâts, soin, bonus, etc.).
          example: 10
        description:
          type: string
          description: Description textuelle de l'item.
          example: "A basic iron sword."
        rarity:
          type: string
          description: Rareté de l'item.
          enum: [Common, Rare, Epic, Legendary]
          example: "Common"
        itemType:
          type: string
          description: Type d'item (arme, consommable, armure).
          enum: [Weapon, Consumable, Armor]
          example: "Weapon"
      example:
        uuid: "b7e23ec2-8b7a-4c2a-9c1a-1e2b3c4d5e6f"
        name: "Iron Sword"
        effect: "Attack"
        value: 10
        description: "A basic iron sword."
        rarity: "Common"
        itemType: "Weapon"

    ItemCreate:
      type: object
      required: [name, effect, value, rarity, itemType]
      properties:
        name:
          type: string
          description: Nom de l'item.
        effect:
          type: string
          description: Effet principal de l'item.
          enum: [Attack, Heal, HealthPointMax]
        value:
          type: number
          description: Valeur numérique de l'effet.
        description:
          type: string
          description: Description textuelle de l'item.
        rarity:
          type: string
          description: Rareté de l'item.
          enum: [Common, Rare, Epic, Legendary]
        itemType:
          type: string
          description: Type d'item.
          enum: [Weapon, Consumable, Armor]
      example:
        name: "Iron Sword"
        effect: "Attack"
        value: 10
        description: "A basic iron sword."
        rarity: "Common"
        itemType: "Weapon"

    Error:
      type: object
      required: [message]
      properties:
        message:
          type: string
          description: Message d'erreur.
          example: "Item not found"
        code:
          type: integer
          description: Code d'erreur HTTP.
          example: 404
      example:
        message: "Item not found"
        code: 404

tags:
  - name: Items
    description: Gestion des items